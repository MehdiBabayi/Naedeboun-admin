# ๐ ุฑุงูููุง ุฌุงูุน ุจฺฉโุงูุฏ ุจุฑุง ูพูู ุงุฏูู (ูุณุฎู ฒ)

## ๐ฏ ูุฏู ุงู ุณูุฏ

ุงู ูุงู ุจุฑุง **ุชูุณุนูโุฏููุฏู ูพูู ุงุฏูู (ุงูพูฺฉุดู ููุงุชุฑ ุงุฏูู)** ููุดุชู ุดุฏู ุชุง:

- **ููู ุชุจูโูุง ููู ุฏุชุงุจุณ** (ุจุนุฏ ุงุฒ ุชูุงู Migrationูุง) ุฑุง ุจุดูุงุณุฏ  
- ุจุฏุงูุฏ **ูุฑ ุชุจู ุฏููุงู ฺู ุฏุงุฏูโุง ูฺฏู ูโุฏุงุฑุฏ**  
- ุจุฏุงูุฏ **ุฏุฑ ูพูู ุงุฏูู ููุงุชุฑุ ูุฑ ุชุจู ฺุทูุฑ ู ุฏุฑ ฺฉุฏุงู ุตูุญูโูุง ุงุณุชูุงุฏู ูโุดูุฏ**  
- ุจุฏุงูุฏ **ฺู ุชุจูโูุง ุญุฐู ุดุฏูโุงูุฏ ู ุฌุงฺฏุฒูโุดุงู ฺุณุช**  
- ุจุฏุงูุฏ ฺฉู **ูพูู ุงุฏูู Mini-Request ูุฏุงุฑุฏ** ู ุจุงุฏ ุจุง **ุฑฺฉูุฆุณุช ุณูุช ุตูุญูโุง** ฺฉุงุฑ ฺฉูุฏ

ุงู ุณูุฏ ุชุฑฺฉุจ ุงุณุช ุงุฒ:

- ุฎุฑูุฌ ููุง ูพูู `PLAN_STATIC_DATA_TO_FRONTEND.md`  
- ฺฏุฒุงุฑุด ูุจู `ADMIN_PANEL_MIGRATION_REPORT.md`  
- ุชุบุฑุงุช ุฌุฏุฏ ุฑู ุชุจูโูุง PDF (`book_answer_pdfs`, `provincial_sample_pdfs`)  
- ู ุชูุถุญุงุช ุชฺฉูู ูฺูู ูพูู ุงุฏูู ููุงุชุฑ

> โ๏ธ ูฺฉุชู ููู: ุฏุฑ ุงู ูุญุท ูู ุจู ุงุจุฒุงุฑ MCP-Supabase ุฏุณุชุฑุณ ุนูู ูุฏุงุฑู ุชุง *ุงูุงู* ุจูโุตูุฑุช ุฒูุฏู ุชุจูโูุง ุฑุง ุจุฎูุงููุ  
> ุงูุง ุณุงุฎุชุงุฑ ุชุจูโูุง ู ุชุบุฑุงุช ุจุฑ ุงุณุงุณ ููุงู Migrationูุง ุงุณุช ฺฉู ูุจูุงู ุจุฑุง ููู ูพุฑูฺู ูุณุชูุฏ ู ูพุงุฏู ุดุฏูโุงูุฏ.

---

## ๐งฑ ุงุตูู ูพุงู ุจุฑุง ูพูู ุงุฏูู

- **ุจุฏูู Mini-Request**  
  - ูพูู ุงุฏูู ููุงุชุฑ **ูฺ ุงุณุชูุงุฏูโุง ุงุฒ Mini-Request ู Hive** ูุฏุงุฑุฏ.  
  - ูุฑ ุตูุญูู ุงุฏูู ุฏุฑ ุฒูุงู ูุงุฒุ **ูุณุชูู ุฏุฑุฎูุงุณุช ุจู ุจฺฉโุงูุฏ** ูโุฒูุฏ (Supabase REST / Edge Functions).

- **JSON ููุท ุจุฑุง ุงูพ ุงุตู ฺฉุงุฑุจุฑ ุงุณุชุ ูู ูพูู ุงุฏูู**  
  - ุณุงุฎุชุงุฑ `grades.json` ู `gradeX.json` ุจุฑุง ุงูพ ุงุตู (ุฏุงูุดโุขููุฒ) ุงุณุช.  
  - ูพูู ุงุฏูู ูโุชูุงูุฏ ุจุฑุง ุงุนุชุจุงุฑุณูุฌ ุงุฒ ููู JSONูุง ุงุณุชูุงุฏู ฺฉูุฏุ ูู **ููุจุน ุงุตู ุฏุงุฏูโุงุด ููฺูุงู ุฏุชุงุจุณ** ุงุณุช.

- **ุชูุงู ุฏุงุฏูโูุง ูพูุง (ูุฏูุ PDFุ ุจูุฑุ โฆ) ุงุฒ ุชุจูโูุง Supabase ูโุขุฏ.**

---

## ๐๏ธ ููุฑุณุช ุชุจูโูุง ููู ุจุนุฏ ุงุฒ Migration (ููุง ฺฉู)

### 1. `lesson_videos` โ ูุฏููุง ุขููุฒุด

**ูุถุนุช:**  
ุงู ุชุจู ุจุนุฏ ุงุฒ Migration ุจู ุณุงุฎุชุงุฑ ุฌุฏุฏ ุณุงุฏูโุณุงุฒ ุดุฏู ู ุชููุง ููุจุน ุฏุงูุงูฺฉ ุจุฑุง ูุฏููุงุณุช.

**ูุฏู:**  
ูฺฏูุฏุงุฑ ุชูุงู ุงุทูุงุนุงุช ูุฑุจูุท ุจู ูุฏููุง ุฏุฑุณโูุง.

**ููุฏูุง ฺฉูุฏ (ูุณุฎูู ุฌุฏุฏ):**

- `id` (PRIMARY KEY)  
- `grade` (INTEGER, NOT NULL) โ ูพุงู (ฑ ุชุง ฑฒ)  
- `track` (VARCHAR, NULLABLE)  
  - `NULL` ุจุฑุง ูพุงูโูุง ฑ ุชุง น  
  - `'riazi' | 'tajrobi' | 'ensani' | 'fani'` ุจุฑุง ฑฐ ุชุง ฑฒ  
- `subject_slug` (VARCHAR, NOT NULL) โ ุงุณูุงฺฏ ุฏุฑุณ (`'riazi'`, `'farsi'`, ...)  
- `chapter_order` (INTEGER, NOT NULL) โ ุดูุงุฑู ูุตู (ฑุ ฒุ ณุ โฆ)  
- `lesson_order` (INTEGER, NOT NULL) โ ุดูุงุฑู ุฏุฑุณ ุฏุงุฎู ูุตู  
- `teacher_name` (VARCHAR, NOT NULL) โ ูุงู ุงุณุชุงุฏ (ุฑุดุชู ุณุงุฏู)  
- `style` (VARCHAR, NOT NULL) โ ููุน ูุฏู (`'book' | 'note' | 'sample'`)  
- `note_pdf_url` (TEXT, NULLABLE) โ ููฺฉ PDF ุฌุฒูู (ุงุฎุชุงุฑ)  
- `exercise_pdf_url` (TEXT, NULLABLE) โ ููฺฉ PDF ุชูุฑู/ููููู ุณุคุงู (ุงุฎุชุงุฑ)  
- `embed_html`, `aparat_url`, `duration_sec`, `active`, `created_at`, `updated_at`, ...

**ฺู ฺุฒ ุฏุฑ ุงู ุชุจู ุฐุฎุฑู ูโุดูุฏุ**

- ูุฑ ุณุทุฑ = **ฺฉ ูุฏู** ุจุฑุง ฺฉ ูพุงู + ุฑุดุชู (ุงุฎุชุงุฑ) + ุฏุฑุณ + ูุตู + ุดูุงุฑู ุฏุฑุณ.  
- ููฺฉโูุง ูุฏูุ PDFูุง ูุฑุชุจุทุ ูุงู ุงุณุชุงุฏ ู ูุชุงุฏุชุง.

**ูพูู ุงุฏูู ููุงุชุฑ ฺุทูุฑ ุจุงุฏ ุงุฒ ุงู ุชุจู ุงุณุชูุงุฏู ฺฉูุฏุ**

- **ุตูุญูู ูุณุช ูุฏููุง**:
  - ููุชุฑ ุจุฑ ุงุณุงุณ:
    - ูพุงู (`grade`)  
    - ุฑุดุชู (`track`)  
    - ุฏุฑุณ (`subject_slug`)  
    - ูุตู (`chapter_order`)  
  - ูุฑุชุจโุณุงุฒ ุจุฑ ุงุณุงุณ `lesson_order`.

- **ุตูุญูู ุณุงุฎุช ูุฏู ุฌุฏุฏ**:
  - ูุฑู ุดุงูู:
    - `grade` (dropdown)  
    - `track` (ุงฺฏุฑ ูพุงู ฑฐโฑฒ ุงุณุช)  
    - `subject_slug` (dropdown ุจุฑ ุงุณุงุณ JSON ุง ูุณุช ุซุงุจุช)  
    - `chapter_order` (dropdown ุจุฑ ุงุณุงุณ JSON ููุงู ูพุงู/ุฏุฑุณ)  
    - `lesson_order` (input number)  
    - `teacher_name`, `style`, `video_url`/`aparat_url`, `note_pdf_url`, `exercise_pdf_url`, ...
  - ุงุฑุณุงู ูุฑู:
    - ูพุดููุงุฏ ุดุฏู ุงุณุช ฺฉู **ุจูโุฌุง ุฒุฏู ูุณุชูู ุฑู `lesson_videos`**ุ
      ุงุฒ Edge Functionูุง ูุณุชูุฏ ุดุฏู ุงุณุชูุงุฏู ุดูุฏ:
      - `create-content` โ ุจุฑุง Insert  
      - `update-content` โ ุจุฑุง Update  
      - `delete-content` โ ุจุฑุง Soft Delete

- **ุตูุญูู ูุฑุงุด ูุฏู**:
  - ุฎูุงูุฏู ฺฉ ุฑฺฉูุฑุฏ ุจุง `id`  
  - ูพุฑ ฺฉุฑุฏู ูุฑู ุจุง ุฏุงุฏูโูุง ูุนู  
  - ุงุฑุณุงู ุชุบุฑุงุช ุจู Edge Function `update-content`.

> ๐ ูฺฉุชู ุจุฑุง ุงุฏูู:  
> ุฏุฑ ุงูพ ุงุตู ฺฉุงุฑุจุฑุ Mini-Request ฺฉู `lesson_videos` ุฑุง ุจู ุตูุฑุช bulk ูโฺฉุดุฏ ู ุฏุฑ Hive ูโุฑุฒุฏ.  
> ูู **ุฏุฑ ูพูู ุงุฏูู** ูุฑ ุตูุญู ุจูโุตูุฑุช ูุนููู (ุณูุช) ููุท ุฏุงุฏูโูุง ููุฑุฏ ูุงุฒ ุฎูุฏุด ุฑุง ุงุฒ ููู ุชุจู ููุฏ ูโฺฉูุฏ.

#### 1.1. ุณุงุฎุชุงุฑ SQL ุชูุฑุจ `lesson_videos` ุจุนุฏ ุงุฒ Migration

```sql
CREATE TABLE lesson_videos (
    id            SERIAL PRIMARY KEY,
    grade         INTEGER      NOT NULL,   -- ูพุงู 1 ุชุง 12
    track         VARCHAR(50),             -- null ุจุฑุง 1-9ุ 'riazi'/'tajrobi'/'ensani'/'fani' ุจุฑุง 10-12
    subject_slug  VARCHAR(100) NOT NULL,   -- ุงุณูุงฺฏ ุฏุฑุณ ูุซู 'riazi', 'farsi'
    chapter_order INTEGER      NOT NULL,   -- ุดูุงุฑู ูุตู
    lesson_order  INTEGER      NOT NULL,   -- ุดูุงุฑู ุฏุฑุณ ุฏุฑ ูุตู
    teacher_name  VARCHAR(100) NOT NULL,   -- ูุงู ุงุณุชุงุฏ ุจู ุตูุฑุช ูุชู
    style         VARCHAR(50)  NOT NULL,   -- 'book', 'note', 'sample'
    aparat_url    VARCHAR(500),
    embed_html    TEXT,
    duration_sec  INTEGER,
    note_pdf_url      TEXT,
    exercise_pdf_url  TEXT,
    view_count    INTEGER      DEFAULT 0,
    active        BOOLEAN      DEFAULT TRUE,
    created_at    TIMESTAMP    DEFAULT NOW(),
    updated_at    TIMESTAMP    DEFAULT NOW()
);
```

#### 1.2. ูููููู ุฑฺฉูุฑุฏ ุฏุฑ `lesson_videos`

```json
{
  "id": 123,
  "grade": 7,
  "track": null,
  "subject_slug": "riazi",
  "chapter_order": 1,
  "lesson_order": 2,
  "teacher_name": "ุจุงุจุง",
  "style": "note",
  "aparat_url": "https://www.aparat.com/v/xxxx",
  "embed_html": "<iframe ...>",
  "duration_sec": 900,
  "note_pdf_url": "https://dl1.ostadriazi.com/pdf/notes/grade7_riazi_ch1_l2.pdf",
  "exercise_pdf_url": "https://dl1.ostadriazi.com/pdf/sample/grade7_riazi_ch1_l2.pdf",
  "view_count": 0,
  "active": true,
  "created_at": "2025-01-01T10:00:00Z",
  "updated_at": "2025-01-01T10:00:00Z"
}
```

#### 1.3. ููููู ฺฉุฏ Flutter (ูพูู ุงุฏูู) ุจุฑุง ุฎูุงูุฏู ูุณุช ูุฏููุง

```dart
final supabase = SupabaseClient(supabaseUrl, supabaseKey);

Future<List<Map<String, dynamic>>> loadVideos({
  required int grade,
  String? track,
  required String subjectSlug,
  int? chapterOrder,
}) async {
  var query = supabase
      .from('lesson_videos')
      .select('*')
      .eq('grade', grade)
      .eq('subject_slug', subjectSlug)
      .eq('active', true);

  if (grade >= 10 && track != null) {
    query = query.eq('track', track);
  } else {
    query = query.isFilter('track', null);
  }

  if (chapterOrder != null) {
    query = query.eq('chapter_order', chapterOrder);
  }

  final data = await query
      .order('chapter_order', ascending: true)
      .order('lesson_order', ascending: true);

  return (data as List).cast<Map<String, dynamic>>();
}
```

#### 1.4. ุชุบุฑุงุช ููู ูุณุจุช ุจู ูุณุฎู ูุจู (ุจุฑุง ุงุฏูู)

- ูุจูุงู:
  - ุจู ุฌุง `grade`, `track`, `subject_slug`, `chapter_order`, `lesson_order` ุงุฒ ุชุฑฺฉุจ ฺูุฏ ุชุจู (`grades`, `subjects`, `chapters`, `lessons`) + `chapter_id`/`lesson_id` ุงุณุชูุงุฏู ูโุดุฏ.  
  - `teacher_id` ูุฌูุฏ ุฏุงุดุช ู ุจุง ุชุจู ุฌุฏุงฺฏุงููู `teachers` ูุฑุชุจุท ุจูุฏ.
- ุงูุงู:
  - ูููู ุงู ูุงุจุณุชฺฏโูุง ุญุฐู ู ุจู **ฺฉ ุชุจู ุณุงุฏู** (`lesson_videos`) ุชุจุฏู ุดุฏู ุงุณุช.  
  - ุจูโุฌุง `teacher_id`, ูุณุชููุงู `teacher_name` ุฐุฎุฑู ูโุดูุฏ.  
  - ูพูู ุงุฏูู ูุงุฒู ูุณุช ุฏฺฏุฑ ุจู ุชุจูโูุง ุญุฐูโุดุฏู ูุตู ุดูุฏุ ููุท ููู ุชุจู ุฑุง ูุฏุฑุช ูโฺฉูุฏ.

---

### 2. `book_answer_pdfs` โ ฺฏุงูโุจูโฺฏุงู (ุฌูุงุจ ฺฉุชุงุจโูุง)

**ูุถุนุช:**  
ุชุจู ูุฏู `step_by_step_pdfs` ุญุฐู/rename ุดุฏู ู ุจุง ุณุงุฎุชุงุฑ ุฌุฏุฏ ุจู ูุงู `book_answer_pdfs` ุฌุงฺฏุฒู ุดุฏู ุงุณุช.

**ูุฏู:**  
ูฺฏูุฏุงุฑ PDFูุง ฺฏุงูโุจูโฺฏุงู / ุญูโุงููุณุงุฆู ฺฉุชุงุจโูุง ุฏุฑุณ.

**ููุฏูุง ฺฉูุฏ (ุจุฑ ุงุณุงุณ Model ููุงุชุฑ):**

- `id` (PRIMARY KEY)  
- `grade_id` (INTEGER, NOT NULL) โ ูพุงู  
- `book_id` (TEXT, NOT NULL) โ ุดูุงุณู ฺฉุชุงุจ (ููุงู `book_id`/`slug` ุฏุฑ JSONุ ูุซูุงู `"riazi"`, `"farsi"`)  
- `pdf_title` (TEXT, NOT NULL) โ ุนููุงู PDF  
- `year` (INTEGER, NULLABLE) โ ุณุงู ุงูุชุดุงุฑ  
- `size` (NUMERIC/DOUBLE, NULLABLE) โ ุญุฌู ูุงู (ูุซูุงู MB)  
- `file_url` (TEXT, NOT NULL) โ ููฺฉ ุฎูุฏ PDF  
- ุณุงุฑ ููุฏูุง ฺฉูฺฉ (ูุซูุงู `created_at`, `updated_at`, ... ุจุณุชู ุจู Migration)

**ฺู ฺุฒ ุฏุฑ ุงู ุชุจู ุฐุฎุฑู ูโุดูุฏุ**

- ูุฑ ุณุทุฑ = **ฺฉ PDF ฺฏุงูโุจูโฺฏุงู** ุจุฑุง ฺฉ ฺฉุชุงุจ ุฏุฑ ฺฉ ูพุงู ูุดุฎุต.

**ูพูู ุงุฏูู ููุงุชุฑ ฺุทูุฑ ุจุงุฏ ุงุฒ ุงู ุชุจู ุงุณุชูุงุฏู ฺฉูุฏุ**

- **ุตูุญูู ูุณุช ฺฏุงูโุจูโฺฏุงูโูุง**:
  - ููุชุฑ:
    - ุจุฑ ุงุณุงุณ `grade_id`  
    - ุจุฑ ุงุณุงุณ `book_id` (ุฏุฑุณ)  
  - ููุงุด ุณุชููโูุง:
    - `pdf_title`, `year`, `size`, `file_url`

- **ุตูุญูู ุณุงุฎุช ฺฏุงูโุจูโฺฏุงู ุฌุฏุฏ**:
  - ูุฑู:
    - ุงูุชุฎุงุจ ูพุงู (`grade_id`)  
    - ุงูุชุฎุงุจ ฺฉุชุงุจ (`book_id`) โ ุชุฑุฌุญุงู ุงุฒ ุฑู JSON ููุงู ูพุงู  
    - ุนููุงู (`pdf_title`)  
    - ุณุงู (`year`)  
    - ุญุฌู (`size`)  
    - ุขูพููุฏ/ุขุฏุฑุณ `file_url`
  - ุฑฺฉูุฆุณุช:
    - Insert ูุณุชูู ุฑู `book_answer_pdfs` ุง ฺฉ Edge Function ุงุฎุชุตุงุต (ุงฺฏุฑ ุณุงุฎุชู ุดูุฏ).

- **ุตูุญูู ูุฑุงุด / ุญุฐู**:
  - ุงูุชุฎุงุจ ุฑฺฉูุฑุฏ ุจุง `id`  
  - Update / Soft Delete ุฑู ููุงู ุชุจู.

> ๐ ุงุฑุชุจุงุท ุจุง ุงูพ ุงุตู:  
> ุงูพ ุงุตู ุจุฑุง ููุงุด ฺฏุงูโุจูโฺฏุงูโูุง ุงุฒ `CachedContentService.getBookAnswerPdfs` ุงุณุชูุงุฏู ูโฺฉูุฏ  
> ฺฉู ุฏุฑ ูพุดุชโุตุญูู ุฑู **ููู ุชุจู** ฺฉุงุฑ ูโฺฉูุฏ.  
> ูพุณ ูุฑ ุชุบุฑ ฺฉู ุฏุฑ ูพูู ุงุฏูู ุฑู `book_answer_pdfs` ุงูุฌุงู ุฏูุ ุจุนุฏ ุงุฒ Mini-Request ุฏุฑ ุงูพุ ุฏุฏู ูโุดูุฏ.

#### 2.1. ุณุงุฎุชุงุฑ SQL ุชูุฑุจ `book_answer_pdfs`

```sql
CREATE TABLE book_answer_pdfs (
    id         SERIAL PRIMARY KEY,
    grade_id   INTEGER      NOT NULL,   -- ูพุงู
    book_id    VARCHAR(100) NOT NULL,   -- ููุงู slug/ุดูุงุณู ฺฉุชุงุจ ุฏุฑ JSON
    pdf_title  TEXT         NOT NULL,
    year       INTEGER,
    size       NUMERIC,
    file_url   TEXT         NOT NULL,
    created_at TIMESTAMP    DEFAULT NOW(),
    updated_at TIMESTAMP    DEFAULT NOW()
);
```

#### 2.2. ููููู ุฑฺฉูุฑุฏ

```json
{
  "id": 10,
  "grade_id": 7,
  "book_id": "riazi",
  "pdf_title": "ฺฏุงูโุจูโฺฏุงู ุฑุงุถ ููุชู - ฺุงูพ 1403",
  "year": 1403,
  "size": 12.5,
  "file_url": "https://dl1.ostadriazi.com/pdf/gambegam/grade7_riazi_1403.pdf"
}
```

#### 2.3. ููููู ฺฉุฏ Flutter (ูพูู ุงุฏูู) ุจุฑุง ุฎูุงูุฏู ูุณุช ฺฏุงูโุจูโฺฏุงูโูุง

```dart
Future<List<Map<String, dynamic>>> loadBookAnswers({
  required int gradeId,
  String? bookId,
}) async {
  var query = supabase
      .from('book_answer_pdfs')
      .select('*')
      .eq('grade_id', gradeId);

  if (bookId != null && bookId.isNotEmpty) {
    query = query.eq('book_id', bookId);
  }

  final data = await query.order('year', ascending: false);
  return (data as List).cast<Map<String, dynamic>>();
}
```

#### 2.4. ุชุบุฑ ูุงู ู Migration ุงุฒ `step_by_step_pdfs` ุจู `book_answer_pdfs`

- ูุจูุงู:
  - ุชุจู ุจุง ูุงู `step_by_step_pdfs` ูุฌูุฏ ุฏุงุดุช.  
  - ููุฏูุง ูุงููุฏ `subject_id`, `level`, `title`, `fileSizeMb` ู... ุฏุงุดุช.
- ุงูุงู:
  - ุชุจู ุฌุฏุฏ `book_answer_pdfs` ุฏุงุฑู.  
  - `subject_id` โ ุจู `book_id` (ูุชู/slug) ุชุจุฏู ุดุฏู ุงุณุช.  
  - `title` โ ุจู `pdf_title` ุชุบุฑ ูุงู ุฏุงุฏู ุงุณุช.  
  - `level` ุญุฐู ุดุฏู ู ุฌุง ุขู ุชุฑฺฉุจ `grade_id + book_id` ุงุณุชูุงุฏู ูโุดูุฏ.  
  - `fileSizeMb` โ ุจู `size` ุชุจุฏู ุดุฏู ุงุณุช.
- ุจุฑุง ุงุฏูู:
  - ุงฺฏุฑ ุฌุง ุฏุฑ ูพูู ุงุฏูู ูููุฒ ุจู `step_by_step_pdfs` ูุตู ูุณุชุ ุจุงุฏ:
    - ูุงู ุชุจู ุฑุง ุจู `book_answer_pdfs` ุชุบุฑ ุจุฏู.  
    - ููุฏูุง ุฑุง ูุทุงุจู ุณุงุฎุชุงุฑ ุฌุฏุฏ ุจุฎูุงู/ุจููุณ.

---

### 3. `provincial_sample_pdfs` โ ููููู ุณุคุงู ุงุณุชุงู / ุงูุชุญุงู

**ูุถุนุช:**  
ุชุจู `provincial_sample_pdfs` ุจุง ุณุงุฎุชุงุฑ ุฌุฏุฏ ุจุงุฒุทุฑุงุญ ุดุฏู ุงุณุช (ููุฏูุง ูุฏู ูุซู `level`, `subject_id`, ...) ุชุบุฑ ฺฉุฑุฏูโุงูุฏ.

**ูุฏู:**  
ุฐุฎุฑูู PDFูุง ููููู ุณุคุงู ุงุณุชุงูุ ุชุฑู ุงูู/ุฏููุ ูุงูโุชุฑู ู โฆ

**ููุฏูุง ฺฉูุฏ (ุจุฑ ุงุณุงุณ Model ููุงุชุฑ `ProvincialSamplePdf`):**

- `id` (PRIMARY KEY)  
- `grade_id` (INTEGER, NOT NULL) โ ูพุงู  
- `book_id` (TEXT, NOT NULL) โ ุดูุงุณู ฺฉุชุงุจ (ูุงููุฏ JSON)  
- `pdf_title` (TEXT, NOT NULL) โ ุนููุงู PDF  
- `type` (TEXT, NOT NULL) โ ููุน ุงูุชุญุงู:
  - `'first_term'` (ููุจุช ุงูู)  
  - `'second_term'` (ููุจุช ุฏูู)  
  - `'midterm_1'`, `'midterm_2'` (ูุงูโุชุฑูโูุง)  
- `year` (INTEGER, NULLABLE) โ ุณุงู  
- `author` (TEXT, NULLABLE) โ ุทุฑุงุญ/ุงุณุชุงู/ุงุฏุงุฑู  
- `has_answer` (BOOLEAN, NOT NULL) โ ุขุง ูพุงุณุฎูุงูู ุฏุงุฑุฏ ุง ูู  
- `size` (NUMERIC/DOUBLE, NULLABLE) โ ุญุฌู ูุงู  
- `file_url` (TEXT, NOT NULL) โ ููฺฉ PDF

**ฺู ฺุฒ ุฏุฑ ุงู ุชุจู ุฐุฎุฑู ูโุดูุฏุ**

- ูุฑ ุณุทุฑ = ฺฉ PDF ููููู ุณุคุงู ุจุฑุง ฺฉ ฺฉุชุงุจุ ฺฉ ูพุงูุ ฺฉ ููุน ุงูุชุญุงู ู ุณุงู ูุดุฎุต.

**ูพูู ุงุฏูู ููุงุชุฑ ฺุทูุฑ ุจุงุฏ ุงุฒ ุงู ุชุจู ุงุณุชูุงุฏู ฺฉูุฏุ**

- **ุตูุญูู ูุณุช ููููู ุณุคุงูโูุง**:
  - ููุชุฑ:
    - ูพุงู (`grade_id`)  
    - ฺฉุชุงุจ (`book_id`)  
    - ููุน (`type`)  
    - ุณุงู (`year`)  
    - ููุชุฑ ุฑู `has_answer` (ููุท ุจุง ูพุงุณุฎ / ุจุฏูู ูพุงุณุฎ)

- **ุตูุญูู ุณุงุฎุช ููููู ุณุคุงู ุฌุฏุฏ**:
  - ูุฑู:
    - `grade_id`, `book_id`  
    - `type` (dropdown ุซุงุจุช ุงุฒ enum ุจุงูุง)  
    - `pdf_title`, `year`, `author`  
    - `has_answer` (checkbox)  
    - `size`, `file_url`
  - ุฑฺฉูุฆุณุช:
    - Insert ูุณุชูู ุฑู `provincial_sample_pdfs` ุง ุงุฒ ุทุฑู Edge Function ุงฺฏุฑ ุฎูุงุณุช ูุงูู ููุทู ุงุถุงูู ฺฉู.

> ๐ ุงุฑุชุจุงุท ุจุง ุงูพ ุงุตู:  
> ุงูพ ุงุตู ุจุฑุง ููุงุด ุงู ุฏุงุฏูโูุง ุงุฒ `CachedContentService.getProvincialSamplePdfs` ุงุณุชูุงุฏู ูโฺฉูุฏ  
> ฺฉู ุฑู ููู ุชุจู ููุชุฑ ุจุฑ ุงุณุงุณ `book_id`, `type`, `year`, `has_answer` ุงูุฌุงู ูโุฏูุฏ.

#### 3.1. ุณุงุฎุชุงุฑ SQL ุชูุฑุจ `provincial_sample_pdfs`

```sql
CREATE TABLE provincial_sample_pdfs (
    id         SERIAL PRIMARY KEY,
    grade_id   INTEGER      NOT NULL,
    book_id    VARCHAR(100) NOT NULL,
    pdf_title  TEXT         NOT NULL,
    type       VARCHAR(50)  NOT NULL, -- 'first_term', 'second_term', 'midterm_1', 'midterm_2'
    year       INTEGER,
    author     TEXT,
    has_answer BOOLEAN      NOT NULL DEFAULT FALSE,
    size       NUMERIC,
    file_url   TEXT         NOT NULL,
    created_at TIMESTAMP    DEFAULT NOW(),
    updated_at TIMESTAMP    DEFAULT NOW()
);
```

#### 3.2. ููููู ุฑฺฉูุฑุฏ

```json
{
  "id": 21,
  "grade_id": 7,
  "book_id": "riazi",
  "pdf_title": "ููููู ุณูุงู ููุจุช ุงูู ุฑุงุถ ููุชู - ุขููุฒุด ู ูพุฑูุฑุด ุชูุฑุงู",
  "type": "first_term",
  "year": 1402,
  "author": "ุขููุฒุด ู ูพุฑูุฑุด ุชูุฑุงู",
  "has_answer": true,
  "size": 4.2,
  "file_url": "https://dl1.ostadriazi.com/pdf/provincial/grade7_riazi_first_1402_tehran.pdf"
}
```

#### 3.3. ููููู ฺฉุฏ Flutter (ูพูู ุงุฏูู) ุจุฑุง ูุณุช ููููู ุณุคุงูโูุง

```dart
Future<List<Map<String, dynamic>>> loadProvincialPdfs({
  required int gradeId,
  String? bookId,
  String? type,
  int? year,
  bool? hasAnswer,
}) async {
  var query = supabase
      .from('provincial_sample_pdfs')
      .select('*')
      .eq('grade_id', gradeId);

  if (bookId != null && bookId.isNotEmpty) {
    query = query.eq('book_id', bookId);
  }
  if (type != null && type.isNotEmpty) {
    query = query.eq('type', type);
  }
  if (year != null) {
    query = query.eq('year', year);
  }
  if (hasAnswer != null) {
    query = query.eq('has_answer', hasAnswer);
  }

  final data = await query
      .order('year', ascending: false)
      .order('type', ascending: true);

  return (data as List).cast<Map<String, dynamic>>();
}
```

#### 3.4. ุชูุงูุช ุจุง ูุณุฎู ูุฏู ุชุจู ููููู ุณุคุงู

- ูุจูุงู:
  - ููุฏูุง ูุงููุฏ `level`, `subject_id`, `designer`, `fileSizeMb` ู... ุฏุงุดุช.  
  - ุงุฑุชุจุงุท ุจุง ุฏุฑุณ ุงุฒ ุทุฑู `subject_id` ุจูุฏ.
- ุงูุงู:
  - `level` โ ุจู `grade_id` ุชุจุฏู ุดุฏู ุงุณุช.  
  - `subject_id` โ ุจุง `book_id` ุฌุงฺฏุฒู ุดุฏู ฺฉู ุจุง JSON ููโุฑุงุณุชุง ุงุณุช.  
  - `designer` โ ุจู `author` ุชุบุฑ ูุงู ุฏุงุฏู ุงุณุช.  
  - `fileSizeMb` โ ุจู `size` ุชุจุฏู ุดุฏู ุงุณุช.  
  - ููุฏ ุฌุฏุฏ `type` ุงุถุงูู ุดุฏู ุชุง ููุน ุงูุชุญุงู ูุดุฎุต ุจุงุดุฏ.

ุจุฑุง ุงุฏูู:

- ุงฺฏุฑ ุฏุฑ ุงูพ ุงุฏูู ูููุฒ ฺฉูุฆุฑโูุง ุจุฑ ุงุณุงุณ `subject_id` ู `level` ููุดุชู ุดุฏูโุงูุฏุ  
  ุจุงุฏ ุขูโูุง ุฑุง ุจู `grade_id` ู `book_id` ู `type` ุชุบุฑ ุจุฏู.

---

### 4. `change_counts` โ ุดูุงุฑูุฏูู ุชุบุฑุงุช ุจุฑุง Mini-Request

**ูุถุนุช:**  
ุงู ุชุจู **ููุท ุจุฑุง ุงูพ ุงุตู** ู Mini-Request ุงุณุชูุงุฏู ูโุดูุฏุ ูู ูพูู ุงุฏูู ุจุง ุขูพุฏุชโฺฉุฑุฏู ุฏุงุฏูโูุง ุจุงุนุซ ุชุบุฑ ููุงุฏุฑ ุงู ุชุจู ูโุดูุฏ.

**ูุฏู:**  
ูฺฏูุฏุงุฑ `change_count` ุจุฑุง ูุฑ ุชุฑฺฉุจ ูพุงู/ุฑุดุชู ุชุง ุงูพ ุงุตู ุจูููุฏ ุขุง ูุงุฒู ุงุณุช ุฏูุจุงุฑู ุฏุงุฏูโูุงุด ุฑุง sync ฺฉูุฏ ุง ูู.

**ููุฏูุง ฺฉูุฏ:**

- `grade` (INTEGER, NOT NULL)  
- `track` (INTEGER ุง TEXT ุจุณุชู ุจู ูุณุฎูุ ูุนูููุงู ฑ/ฒ/ณ/ด ุง `'riazi'` ู โฆ)  
- `change_count` (INTEGER, NOT NULL)  
- `last_updated` (TIMESTAMP)

**ฺุทูุฑ ูพุฑ ูโุดูุฏุ**

- ุงุฒ ุทุฑู:
  - Edge Functions (`create-content`, `update-content`, `delete-content`)  
  - Triggerูุง ุฑู ุชุจูโูุง PDF ู ูุฏููุง (ุจุฑุง ูุซุงู ุฑู `provincial_sample_pdfs`, `book_answer_pdfs`, `lesson_videos`)

**ูฺฉุชู ุจุฑุง ูพูู ุงุฏูู:**

- ูพูู ุงุฏูู **ูุงุฒู ูุณุช ูุณุชูู ุจุง `change_counts` ฺฉุงุฑ ฺฉูุฏ**.  
- ฺฉุงู ุงุณุช ุจุฑุง ูุฑ ุงุฌุงุฏ/ูุฑุงุด/ุญุฐู ูุฏู ุง PDFุ ุงุฒ ูุงูฺฉุดูโูุง/ุชุฑฺฏุฑูุง ุงุณุชูุงุฏู ุดู ฺฉู `change_count` ุฑุง ุจุงูุง ุจุจุฑูุฏ.  
- ุงูพ ุงุตู ุฎูุฏุด ุจุนุฏุงู ุจุง Mini-Request ุงู ุนุฏุฏ ุฑุง ูโุฎูุงูุฏ ู ฺฉุด ุฑุง ุขูพุฏุช ูโฺฉูุฏ.

#### 4.1. ุณุงุฎุชุงุฑ SQL ุชูุฑุจ `change_counts`

```sql
CREATE TABLE change_counts (
    id           SERIAL PRIMARY KEY,
    grade        INTEGER      NOT NULL,
    track        VARCHAR(50),
    change_count INTEGER      NOT NULL DEFAULT 0,
    last_updated TIMESTAMP    DEFAULT NOW()
);
```

#### 4.2. ููุด ุชุฑฺฏุฑูุง ู Edge Functionูุง

- ุฑู ุชุจูโูุง ุฒุฑ (ุง ุจุฎุด ุงุฒ ุขูโูุง) ุชุฑฺฏุฑ ุชุนุฑู ุดุฏู ุงุณุช:
  - `lesson_videos`  
  - `book_answer_pdfs`  
  - `provincial_sample_pdfs`

- ูุฑ ุจุงุฑ:
  - `INSERT` / `UPDATE` / `DELETE` ุฑู ุงู ุชุจูโูุง ุงูุฌุงู ุดูุฏ โ  
    ุชุฑฺฏุฑ `increment_content_change_count` ุงุฌุฑุง ูโุดูุฏ ู:
    - `change_count` ุฑุง ุจุฑุง ุชุฑฺฉุจ `grade`/`track` ูุฑุจูุทู **+1** ูโฺฉูุฏ.  
    - `last_updated` ุฑุง ุจู ุฒูุงู ูุนู ุชูุธู ูโฺฉูุฏ.

- ุจุฑุง ุงุฏูู:
  - ููุช ุฏุฑ ูพูู ุงุฏูู ฺฉ ูุฏู ุง PDF ุฑุง ุฏุณุชโฺฉุงุฑ ูโฺฉูุ  
    **ูุงุฒ ูุณุช ูฺ ฺฉุงุฑ ุฑู `change_counts` ุงูุฌุงู ุฏู**ุ  
    ููุท ูุทูุฆู ุจุงุด ุงุฒ ูุณุฑูุง ุฑุณู (Edge Function ุง ุนููุงุช ุงุณุชุงูุฏุงุฑุฏ Supabase) ุงุณุชูุงุฏู ูโฺฉู ุชุง ุชุฑฺฏุฑูุง ูุนุงู ุดููุฏ.

---

### 5. `banners` โ ุจูุฑูุง / ุงุณูุงุฏุฑูุง

**ูุฏู:**  
ุจูุฑูุง ุชุจูุบุงุช / ุงุทูุงุนูโูุง / ุงุณูุงุฏูุง ฺฉู ุฏุฑ ุงูพ ุงุตู ููุงุด ุฏุงุฏู ูโุดููุฏ.

**ููุฏูุง ูุนููู:**

- `id`  
- `title`  
- `image_url`  
- `link_url` (ุงุฎุชุงุฑ)  
- `active` (BOOLEAN)  
- `position` / `order`  
- `created_at`, `updated_at`

**ุงุณุชูุงุฏู ุฏุฑ ูพูู ุงุฏูู:**

- ุตูุญูู ูุฏุฑุช ุจูุฑูุง:
  - ูุณุชุ ุณุงุฎุชุ ูุฑุงุดุ ุญุฐู  
  - ุขูพููุฏ ุชุตูุฑุ ุชุนู ููฺฉุ ูุนุงู/ุบุฑูุนุงู ฺฉุฑุฏู

---

### 6. ุณุงุฑ ุชุจูโูุง

ุจุณุชู ุจู ุชูุธูุงุช Supabase ููฺฉู ุงุณุช ุชุจูโูุง ุฏฺฏุฑ ูุซู:

- ุชุจูโูุง ุงุญุฑุงุฒ ููุช (`auth.users`)  
- ุชุจูโูุง ูุงฺฏ / ุชูุธูุงุช ุฏุงุฎู  

ูุฌูุฏ ุฏุงุดุชู ุจุงุดูุฏ ฺฉู ูุนูููุงู **ูุณุชูู ุฏุฑ ูพูู ุงุฏูู ููุงุชุฑ ุงุณุชูุงุฏู ููโุดููุฏ** ูฺฏุฑ ุงูโฺฉู ุจุฎุด ูุฏุฑุช ฺฉุงุฑุจุฑุงู/ููุดโูุง ูู ุจุณุงุฒ.

---

## โ ุชุจูโูุง ุญุฐูโุดุฏู ู ุฌุงฺฏุฒูโุดุงู

ุจุฑ ุงุณุงุณ ูพูู `PLAN_STATIC_DATA_TO_FRONTEND.md` ู Migrationูุงุ ุงู ุชุจูโูุง **ุญุฐู ุดุฏูโุงูุฏ** ฺูู ุฏุงุฏูโุดุงู ุจู JSON ููุชูู ุดุฏู:

- `grades` โ ุฌุงฺฏุฒู: `assets/data/grades.json`  
- `tracks` โ ุงุทูุงุนุงุช ุฑุดุชูโูุง ุฏุฑ ูุงู ู ุณุงุฎุชุงุฑ ูุงูโูุง JSON (`grade10_riazi.json`, ...)  
- `subjects` โ ุฌุงฺฏุฒู: ุจุฎุด `books` ุฏุฑ ูุงูโูุง `gradeX*.json`  
- `subject_offers` โ ุฏฺฏุฑ ูุงุฒ ูุณุช (ุฑุงุจุทู grade/subject/track ุฏุฑ JSON ุงุณุช)  
- `chapters` โ ุฌุงฺฏุฒู: `chapters` ุฏุงุฎู ูุฑ ฺฉุชุงุจ ุฏุฑ JSON  
- `lessons` โ ุฏฺฏุฑ ูุงุฒ ูุณุชุ ุฏุฑุณโูุง ุงุฒ `lesson_videos` ุงุณุชุฎุฑุงุฌ ูโุดููุฏ

ููฺูู:

- `step_by_step_pdfs` โ **rename + redesign** ุจู `book_answer_pdfs`  
- `provincial_sample_pdfs` โ **ุณุงุฎุชุงุฑ ููุฏูุงุด ุชุบุฑ ฺฉุฑุฏู** (ุงุฒ `level`, `subject_id`, โฆ ุจู `grade_id`, `book_id`, `type`, `year`, ...)

> โ๏ธ ุจุฑุง ุชูุณุนูโุฏููุฏู ูพูู ุงุฏูู:  
> ุงฺฏุฑ ุฏุฑ ูุณุฎูโูุง ูุฏู ูพููุ ูููุฒ ุจู ุงู ุชุจูโูุง ุญุฐูโุดุฏู ูุตู ุดุฏูโุงุ  
> ุจุงุฏ **ฺฉุฏ ูพูู ุงุฏูู ุฑุง ุขูพุฏุช ฺฉู** ฺฉู:
> - ุจูโุฌุง `grades/subjects/chapters` ุงุฒ JSON (ุจุฑุง ุงุนุชุจุงุฑุณูุฌ) ุงุณุชูุงุฏู ฺฉูุฏ  
> - ู ุจุฑุง ุฏุงุฏูโูุง ุฏุงูุงูฺฉ ููุท ุจู ุชุจูโูุง ุฌุฏุฏ (`lesson_videos`, `book_answer_pdfs`, `provincial_sample_pdfs`, `banners`) ูุตู ุดูุฏ.

---

## ๐ฆ ุณุงุฎุชุงุฑ JSONูุง ุซุงุจุช ู ูฺฏุงุดุช ุขูโูุง ุจู ุชุจูโูุง

> ุงู ุจุฎุด ฺฉูฺฉ ูโฺฉูุฏ ุจุฑูุงููโููุณ ูพูู ุงุฏูู ุจูููุฏ `book_id` ู `subject_slug` ู `chapter_order` ุฏููุงู ุงุฒ ฺฉุฌุง ุขูุฏูโุงูุฏ ู ฺู ูุฑุงุฑุฏุงุฏ ุจุง JSON ุฏุงุฑูุฏ.

### 1. `grades.json` โ ูุณุช ูพุงูโูุง

**ฺฉู ูุญุชูุง** `assets/data/grades.json` ุฏุฑ ุงู ูพุฑูฺู:

```json
{
  "1": {
    "title": "ูพุงู ุงูู",
    "path": "assets/data/videos/grade1.json"
  },
  "2": {
    "title": "ูพุงู ุฏูู",
    "path": "assets/data/videos/grade2.json"
  },
  "3": {
    "title": "ูพุงู ุณูู",
    "path": "assets/data/videos/grade3.json"
  },
  "4": {
    "title": "ูพุงู ฺูุงุฑู",
    "path": "assets/data/videos/grade4.json"
  },
  "5": {
    "title": "ูพุงู ูพูุฌู",
    "path": "assets/data/videos/grade5.json"
  },
  "6": {
    "title": "ูพุงู ุดุดู",
    "path": "assets/data/videos/grade6.json"
  },
  "7": {
    "title": "ูพุงู ููุชู",
    "path": "assets/data/videos/grade7.json"
  },
  "8": {
    "title": "ูพุงู ูุดุชู",
    "path": "assets/data/videos/grade8.json"
  },
  "9": {
    "title": "ูพุงู ููู",
    "path": "assets/data/videos/grade9.json"
  },
  "10": {
    "title": "ุฏูู - ุฑุงุถ ูุฒฺฉ",
    "path": "assets/data/videos/grade10_riazi.json"
  },
  "11": {
    "title": "ุฏูู - ุชุฌุฑุจ",
    "path": "assets/data/videos/grade10_tajrobi.json"
  },
  "12": {
    "title": "ุฏูู - ุงูุณุงู",
    "path": "assets/data/videos/grade10_ensani.json"
  },
  "13": {
    "title": "ุฏูู - ูู ู ุญุฑููโุง",
    "path": "assets/data/videos/grade10_fani.json"
  },
  "14": {
    "title": "ุงุฒุฏูู - ุฑุงุถ ูุฒฺฉ",
    "path": "assets/data/videos/grade11_riazi.json"
  },
  "15": {
    "title": "ุงุฒุฏูู - ุชุฌุฑุจ",
    "path": "assets/data/videos/grade11_tajrobi.json"
  },
  "16": {
    "title": "ุงุฒุฏูู - ุงูุณุงู",
    "path": "assets/data/videos/grade11_ensani.json"
  },
  "17": {
    "title": "ุงุฒุฏูู - ูู ู ุญุฑููโุง",
    "path": "assets/data/videos/grade11_fani.json"
  },
  "18": {
    "title": "ุฏูุงุฒุฏูู - ุฑุงุถ ูุฒฺฉ",
    "path": "assets/data/videos/grade12_riazi.json"
  },
  "19": {
    "title": "ุฏูุงุฒุฏูู - ุชุฌุฑุจ",
    "path": "assets/data/videos/grade12_tajrobi.json"
  },
  "20": {
    "title": "ุฏูุงุฒุฏูู - ุงูุณุงู",
    "path": "assets/data/videos/grade12_ensani.json"
  },
  "21": {
    "title": "ุฏูุงุฒุฏูู - ูู ู ุญุฑููโุง",
    "path": "assets/data/videos/grade12_fani.json"
  }
}
```

ุชูุถุญ ุจุฑุง ุฏููููพุฑ ูพูู ุงุฏูู:

- ฺฉูุฏูุง ุจุงูุง (`"1"`, `"2"`, โฆ, `"21"`) **ID ุฏุงุฎู JSON** ูุณุชูุฏุ ูู ูุฒููุงู `grade_id` ุฏุฑ ุฏุชุงุจุณ.  
- ุงูุง ุฏุฑ ุนููุ ูุง ุงู ูฺฏุงุดุช ุฑุง ุงุณุชูุงุฏู ฺฉุฑุฏูโุงู:
  - ุจุฑุง ูพุงูโูุง ฑ ุชุง น:  
    - ููุฏุงุฑ `grade_id` ุฏุฑ ุชุจูโูุง ููุงู ุนุฏุฏ ูพุงู ุงุณุช (ฑ ุชุง น) ู ุจู entryูุง `"1"` ุชุง `"9"` ุงุดุงุฑู ูโฺฉูุฏ.  
  - ุจุฑุง ูพุงูโูุง ฑฐ ุชุง ฑฒ:  
    - ูุฑ ูพุงู/ุฑุดุชู ฺฉ entry ุฌุฏุง ุฏุงุฑุฏ (ฑฐ ุชุง ฑณ ุจุฑุง ุฏููุ ฑด ุชุง ฑท ุจุฑุง ุงุฒุฏููุ ฑธ ุชุง ฒฑ ุจุฑุง ุฏูุงุฒุฏูู).  
    - ุฎูุฏ `grade` ุฏุฑ ุชุจู `lesson_videos` ููฺูุงู ฑฐุ ฑฑุ ฑฒ ุงุณุช ู **ุฑุดุชู** (track) ุจุง ูุงู (`'riazi'`, `'tajrobi'`, `'ensani'`, `'fani'`) ุงุฒ ุฑู ูุงู JSON (`grade10_riazi.json` ู ...) ูุดุฎุต ูโุดูุฏ.

ุจุฑุง ูพูู ุงุฏููุ ููู ุงู ุงุณุช ฺฉู ุจุฏุงูุฏ:

- ููุช ูโฺฏูุฏ `grade_id` = 7 ุฏุฑ `book_answer_pdfs` ุง `provincial_sample_pdfs`ุ  
  ุฏุฑ JSON ูุนุงุฏูุด entry `"7"` ุงุณุช ฺฉู ุจู ูุงู `grade7.json` ุงุดุงุฑู ูโฺฉูุฏ.  
- ููุช ุฏุฑ ุชุจู ูุฏููุง `grade`=10 ู `track`='riazi' ุจุงุดุฏุ JSON ูุชูุงุธุฑ ููุงู ูุงู ุงุณุช ฺฉู `path` ุขู ุฏุฑ entry `"10"` (`grade10_riazi.json`) ุขูุฏู ุงุณุช.

### 2. `grade7.json` โ ูุซุงู ฺฉุงูู ุณุงุฎุชุงุฑ ูพุงู ููุชู ู ููุด `book_id`

ุฏุฑ ุงู ูพุฑูฺูุ ูุงู `assets/data/videos/grade7.json` ุจู ุงู ุดฺฉู ุงุณุช:

```json
{
  "title": "ูพุงู ููุชู",
  "books": {
    "1": {
      "riazi": {
        "title": "ุฑุงุถ",
        "icon": "assets/images/icon-darsha/riazi1.png",
        "cover": "assets/images/book-covers/grade7/riazi.png",
        "chapter_type": "ูุตู",
        "chapters": {
          "1": { "title": "ุฑุงูุจุฑุฏ ูุง ุญู ูุณุฆูู" },
          "2": { "title": "ุนุฏุฏ ูุง ุตุญุญ" },
          "3": { "title": "ุฌุจุฑ ู ูุนุงุฏูู" },
          "4": { "title": "ููุฏุณู ู ุงุณุชุฏูุงู" },
          "5": { "title": "ุดูุงุฑูุฏู ูุง ู ุงุนุฏุงุฏ ุงูู" },
          "6": { "title": "ุณุทุญ ู ุญุฌู" },
          "7": { "title": "ุชูุงู ู ุฌุฐุฑ" },
          "8": { "title": "ุจุฑุฏุงุฑ ู ูุฎุชุตุงุช" },
          "9": { "title": "ุขูุงุฑ ู ุงุญุชูุงู" }
        }
      }
    },
    "2": {
      "olom": {
        "title": "ุนููู",
        "icon": "assets/images/icon-darsha/olom.png",
        "cover": "assets/images/book-covers/grade7/olom.png",
        "chapter_type": "ูุตู",
        "chapters": {
          "1": { "title": "ุชูฺฉุฑ ู ุชุฌุฑุจู" },
          "2": { "title": "ุงูุฏุงุฒู ฺฏุฑ ุฏุฑ ุนููู ู ุงุจุฒุงุฑูุง ุขู" },
          "3": { "title": "ุงุชู ูุงุ ุงููุจุง ููุงุฏ" },
          "4": { "title": "ููุงุฏ ูพุฑุงููู ูุง" },
          "5": { "title": "ุงุฒ ูุนุฏู ุชุง ุฎุงูู" },
          "6": { "title": "ุณูุฑ ุขุจ ุฑู ุฒูู" },
          "7": { "title": "ุณูุฑ ุขุจ ุฏุฑูู ุฒูู" },
          "8": { "title": "ุงูุฑฺ ู ุชุจุฏู ูุง ุขู" },
          "9": { "title": "ููุงุจุน ุงูุฑฺ" },
          "10": { "title": "ฺฏุฑูุง ู ุจููู ุณุงุฒ ูุตุฑู ุงูุฑฺ" },
          "11": { "title": "ุงุฎุชู ู ุณุงุฒูุงู ุจูุฏ ุขู" },
          "12": { "title": "ุณูุฑู ุณูุงูุช" },
          "13": { "title": "ุณูุฑ ุบุฐุง" },
          "14": { "title": "ฺฏุฑุฏุด ููุงุฏ" },
          "15": { "title": "ุชุจุงุฏู ุจุง ูุญุท" }
        }
      }
    },
    "3": {
      "arabi": {
        "title": "ุนุฑุจ",
        "icon": "assets/images/icon-darsha/arabi.png",
        "cover": "assets/images/book-covers/grade7/arabi.png",
        "chapter_type": "ุฏุฑุณ",
        "chapters": {
          "1": { "title": "ุงููุฏููุฑุณู ุงูููุฃูููููู - ุงูููุญูุฑููู ุงููุนูุฑูุจูููุฉู" },
          "2": { "title": "ุงููุฏููุฑุณู ุงูุซูุงูู - ููู ุงูุตููููู" },
          "3": { "title": "ุงููุฏููุฑูุณู ุงูุซูุงููุซู - ุงูููููุบูุฉู ุงููุฌููููุฉู" },
          "4": { "title": "ุงููุฏููุฑูุณู ุงูุฑูุงุจูุนู - ููุฉู ุงููุนููููู" },
          "5": { "title": "ุงููุฏููุฑูุณู ุงููุฎุงููุณู - ููุฑู ุงููฺฉููุงูู" },
          "6": { "title": "ุงููุฏููุฑูุณู ุงูุณูุงุฏูุณู - ุงููุชููููฺฉููุฑู" },
          "7": { "title": "ุงููุฏููุฑูุณู ุงูุณูุงุจูุนู - ุฌููุงููุฑู ุงููฺฉููุงูู" },
          "8": { "title": "ุงููุฏููุฑูุณู ุงูุซูุงูููู - ฺฉูููุฒู ุงููุญูฺฉููู" },
          "9": { "title": "ุงููุฏููุฑูุณู ุงูุชูุงุณูุนู - ฺฉููุฒู ุงููููุตุญูุฉู" },
          "10": { "title": "ุงููุฏููุฑูุณู ุงููุนุงุดููุฑู - ุงููุญูฺฉููู ุงูููุงููุนุฉู" },
          "11": { "title": "ุงููุฏููุฑูุณู ุงููุญุงุฏู ุนูุดููุฑู - ุงููููููุงุนูุธู ุงููุนูุฏูุฏูููุฉู" },
          "12": { "title": "ุงููุฏููุฑูุณู ุงูุซูุงูู ุนูุดููุฑู - ุญููุงุฑู ุจูููู ูููุฏููููู" },
          "13": { "title": "ุงููุฏููุฑูุณู ุงูุซูุงููุซู ุนูุดููุฑู - ููู ุงูุณูููู" },
          "14": { "title": "ุงููุฏููุฑูุณู ุงูุฑูุงุจูุนู ุนูุดููุฑู - ุงูููุฌููููุงุชู ุงูุฐููููุจููุฉู" },
          "15": { "title": "ุงููุฏููุฑูุณู ุงูุฎูุงููุณู ุนุดููุฑูู - ููู ุงููุญูุฏูุฏู" },
          "16": { "title": "ุงููุฏููุฑูุณู ุงูุณูุงุฏูุณู ุนูุดููุฑู - ุงููุงูุณูุฑูุฉู ุงูููุงุฌูุญูุฉู" },
          "17": { "title": "ุงููุฏููุฑูุณู ุงูุณูุงุจูุนู ุนูุดููุฑู - ุฒููุฉู ุงููุจุงุทููู" },
          "18": { "title": "ุงููุฏููุฑูุณู ุงูุซูุงูููู ุนูุดููุฑู - ููู ููุณูุฑุฉู ุงูููุฃุฑุจูุนูู" },
          "19": { "title": "ุงููุฏููุฑูุณู ุงูุชูุงุณูุนู ุนูุดููุฑู - ุงู ููุฃููุงูู ูู ุงููููุตููู ู ุง ููุฃููููุงูู" },
          "20": { "title": "ุงููุฏููุฑูุณู ุงููุนูุดุฑููู - ููุธูุฑูุฉู ุฅููู ุงููููุนูู ุงูููุงุถู ูู ุงูุถูููุงุฆูุฑู" }
        }
      }
    },
    "4": {
      "englisi": {
        "title": "ุงูฺฏูุณ",
        "icon": "assets/images/icon-darsha/englisi.png",
        "cover": "assets/images/book-covers/grade7/zaban.png",
        "chapter_type": "ุฏุฑุณ",
        "chapters": {
          "1": { "title": "Lesson 1 - My Name" },
          "2": { "title": "Lesson 2 - My Classmates" },
          "3": { "title": "Lesson 3 - My Age" },
          "4": { "title": "Lesson 4 - My Family" },
          "5": { "title": "Lesson 5 - My Appearance" },
          "6": { "title": "Lesson 6 - My House" },
          "7": { "title": "Lesson 7 - My Address" },
          "8": { "title": "Lesson 8 - My Favorite Food" }
        }
      }
    },
    "5": {
      "motaleat": {
        "title": "ูุทุงูุนุงุช",
        "icon": "assets/images/icon-darsha/motaleat.png",
        "cover": "assets/images/book-covers/grade7/motaleat.png",
        "chapter_type": "ูุตู",
        "chapters": {
          "1": { "title": "ุญููู ู ูุณุฆููุช ูุง ูุง" },
          "2": { "title": "ูุงููู" },
          "3": { "title": "ููุงุจูู ุจุง ุญูุงุฏุซ" },
          "4": { "title": "ุชููุฏุ ุชูุฒุนุ ูุตุฑู" },
          "5": { "title": "ูุญุท ุฒูุฏฺฏ ุฎูุฏ ุฑุง ุจุดูุงุณู" },
          "6": { "title": "ุงุฒ ุฒุณุชฺฏุงู ูุง ุงุฑุงู ุญูุงุธุช ฺฉูู" },
          "7": { "title": "ุฌูุนุช ู ููุงุจุน" },
          "8": { "title": "ฺฏุฑุฏุดฺฏุฑ ุฏุฑ ุงุฑุงู" },
          "9": { "title": "ุณุฑุฒูู ูุงุ ฺฉุงูุด ุฏุฑ ฺฏุฐุดุชู ูุง ุฏูุฑ" },
          "10": { "title": "ุดฺฉู ฺฏุฑ ุงููพุฑุงุชูุฑ ูุง ุจุฒุฑฺฏ ุฏุฑ ุงุฑุงู ุจุงุณุชุงู" },
          "11": { "title": "ุงูุถุงุน ุงุฌุชูุงุน  ุงูุชุตุงุฏ ุงุฑุงู ุจุงุณุชุงู" },
          "12": { "title": "ูุฑููฺฏ ู ุชูุฏู ุงุฑุงู ุจุงุณุชุงู" }
        }
      }
    }
  }
}
```

ูฺฉุงุช ููู ุจุฑุง ูพูู ุงุฏูู:

- ูุงูู `books` ฺฉ ูุงูู ุนุฏุฏ (`"1"`, `"2"`, ...) ุฏุงุฑุฏ ฺฉู ุตุฑูุงู ุจุฑุง ูุฑุชุจโุณุงุฒ/ฺฏุฑููโุจูุฏ ุฏุงุฎู ุงุณุชูุงุฏู ุดุฏูุ  
  ฺุฒ ฺฉู ุจุฑุง ุชู ููู ุงุณุช **ฺฉูุฏ ุฏุฑูู ูุฑ ฺฉุชุงุจ** ุงุณุช (`"riazi"`, `"olom"`, `"arabi"`, `"englisi"`, `"motaleat"`):
  - ุงู ฺฉูุฏูุง ููุงู **`book_id` / `subject_slug`** ูุณุชูุฏ ฺฉู ุฏุฑ ุชุจูโูุง ุฒุฑ ุงุณุชูุงุฏู ุดุฏูโุงูุฏ:
    - `lesson_videos.subject_slug`  
    - `book_answer_pdfs.book_id`  
    - `provincial_sample_pdfs.book_id`
- ููุฏูุง `icon` ู `cover`:
  - ุฏุฑ ุงูพ ุงุตู:
    - ุฏุฑ **HomeScreen** ุจุฑุง ููุงุด ุขฺฉู ุฏุฑุณโูุง ุงุฒ ููู `icon` ุฎูุงูุฏู ูโุดูุฏ.  
    - ุฏุฑ **ุตูุญู ฺฏุงูโุจูโฺฏุงู** (BookAnswerScreen) ุจุฑุง ููุงุด ฺฉุงุฑุช ฺฉุชุงุจโูุง ุงุฒ `icon` ู `cover` ุงู JSON ุงุณุชูุงุฏู ุดุฏู ุงุณุช (ฺฉุชุงุจ ุฑุงุถ ููุชู โ ุขฺฉู `riazi1.png` ู ฺฉุงูุฑ `grade7/riazi.png`).
  - ุจุฑุง ูพูู ุงุฏูู:
    - ุงฺฏุฑ ุจุฎูุงู ูุณุช ฺฉุชุงุจโูุง ุฑุง ุจุง ุขฺฉู/ฺฉุงูุฑ ูุดุงู ุจุฏูุ ูโุชูุงู ููู ูุณุฑูุง ุฑุง ุฏุฑ ุงูพ ุงุฏูู ูู ุงุณุชูุงุฏู ฺฉู ุชุง **ููุงููฺฏ ุจุง ุงูพ ุงุตู** ุจุงุดุฏ.
- `chapter_type` ุตุฑูุงู ุจุฑุง UI ุงุณุช (ูุซูุงู "ูุตู" ุง "ุฏุฑุณ") ู ุฑู ุชุจูโูุง ุชุฃุซุฑ ูุฏุงุฑุฏุ  
  ุขูฺู ุฑู ุชุจู ูโูุดูุฏ **ุดูุงุฑูู ูุตู** ุงุณุช (`chapter_order` = ฺฉูุฏูุง `"1"`, `"2"`, ...) ฺฉู ุจู ุนุฏุฏ ุชุจุฏู ุดุฏู.

### 3. ุงุณุชูุงุฏูู ุนูู JSON ุฏุฑ ูพูู ุงุฏูู (ุงุฎุชุงุฑ ูู ููุฏ)

ูพูู ุงุฏูู ูโุชูุงูุฏ (ุฏุฑ ุตูุฑุช ุชูุงู) ููู JSONูุง ุฑุง ุจุฎูุงูุฏ ุชุง:

- Dropdown ุงูุชุฎุงุจ ุฏุฑุณโูุง (`book_id` / `subject_slug`) ุฑุง ุงุฒ ุฑู `books` ุจุณุงุฒุฏ.  
- Dropdown ุงูุชุฎุงุจ ูุตูโูุง (`chapter_order`) ุฑุง ุงุฒ ุฑู `chapters` ุจุณุงุฒุฏ.  
- ูุจู ุงุฒ ุงุฑุณุงู ุจู ุจฺฉโุงูุฏุ ุตุญุช `book_id` ู `chapter_order` ุฑุง ูุณุจุช ุจู JSON ฺฺฉ ฺฉูุฏ.

ููููู ฺฉุฏ ุณุงุฏู ุฎูุงูุฏู JSON ุฏุฑ ูพูู ุงุฏูู (ุฏุฑ ุตูุฑุช reuse ุงุฒ ููู ูุงูโูุง):

```dart
Future<Map<String, dynamic>> loadGradeJson(String assetPath) async {
  final jsonStr = await rootBundle.loadString(assetPath);
  return jsonDecode(jsonStr) as Map<String, dynamic>;
}

Future<List<String>> getBooksForGrade(String assetPath) async {
  final data = await loadGradeJson(assetPath);
  final books = data['books'] as Map<String, dynamic>;
  return books.keys.toList(); // ูุซู: ["riazi", "farsi", ...]
}
```

> ุจุฑุง ูพูู ุงุฏููุ ุงุณุชูุงุฏู ุงุฒ JSON ุงุฎุชุงุฑ ุงุณุชุ ุงฺฏุฑ ุชุฑุฌุญ ุจุฏู ูโุชูุงู ูุณุช `book_id`ูุง ู ูุตูโูุง ุฑุง ุฏุฑ ุฎูุฏ ุงูพ ุงุฏูู ูุงุฑุฏฺฉุฏ ุง ุฌุฏุง ูฺฏูโุฏุงุฑุ ูู ุงฺฏุฑ ูโุฎูุงู ุจุง ุงูพ ุงุตู ููุงููฺฏ ุจูุงูุ ุงุณุชูุงุฏู ุงุฒ ููู JSONูุง ุจูุชุฑู ุฑุงู ุงุณุช.

---

## ๐งญ ุฑุงูููุง ุนูู ุจุฑุง ุฏููููพุฑ ูพูู ุงุฏูู ููุงุชุฑ

### A. ููุณููู ุงุชุตุงู ูพูู ุงุฏูู

- ูุฑ ุตูุญู (Screen) ุฏุฑ ูพูู ุงุฏูู:
  - ุฏุฑ `initState` ุง ุฑู ฺฉ ุฏฺฉููุ **ฺฉ ุฑฺฉูุฆุณุช ูุณุชูู** ุจู ุจฺฉโุงูุฏ ูโุฒูุฏ.  
  - ูุงุฒ ุจู Mini-Requestุ Hiveุ ุง `CachedContentService` ูุฏุงุฑุฏ.  
  - ุชุฑุฌุญุงู ุงุฒ **Supabase Dart Client** ุง ฺฉ ูุงูู `AdminApiService` ุงุณุชูุงุฏู ูโฺฉู ฺฉู:
    - `SELECT / INSERT / UPDATE / DELETE` ุฑู ุชุจูโูุง ุจุงูุง ุงูุฌุงู ุฏูุฏ.  
    - ุง Edge Functionูุง ุฑุง ุตุฏุง ุจุฒูุฏ.

### B. ูฺฏุงุดุช ุชุจู โ ุตูุญู ุฏุฑ ูพูู ุงุฏูู

- `lesson_videos`  
  - ุตูุญู: **ูุฏุฑุช ูุฏููุง**  
    - ูุณุช ู ููุชุฑ ูุฏููุง  
    - ุณุงุฎุช / ูุฑุงุด / ุญุฐู  
    - ููุชุฑ ุจุฑ ุงุณุงุณ ูพุงู/ุฑุดุชู/ุฏุฑุณ/ูุตู

- `book_answer_pdfs`  
  - ุตูุญู: **ูุฏุฑุช PDF ฺฏุงูโุจูโฺฏุงู**  
    - ุจุฑุง ูุฑ ูพุงู ู ฺฉุชุงุจ โ ูุณุช PDFูุง  
    - ุณุงุฎุช / ูุฑุงุด / ุญุฐู

- `provincial_sample_pdfs`  
  - ุตูุญู: **ูุฏุฑุช PDF ููููู ุณุคุงู ุงุณุชุงู**  
    - ููุชุฑ ุจุฑ ุงุณุงุณ ูพุงูุ ฺฉุชุงุจุ ููุน ุงูุชุญุงูุ ุณุงูุ ูพุงุณุฎ ุฏุงุดุชู/ูุฏุงุดุชู  
    - ุณุงุฎุช / ูุฑุงุด / ุญุฐู

- `banners`  
  - ุตูุญู: **ูุฏุฑุช ุจูุฑูุง / ุงุณูุงุฏุฑ**  

- `change_counts`  
  - **ูุณุชูู ุตูุญูู ุฌุฏุง ูุงุฒู ูุณุช**  
  - ููุท ุงฺฏุฑ ุฎูุงุณุช ฺฉ ุตูุญูู Debug/Internal ุจุณุงุฒ ุจุฑุง ุฏุฏู change_count ูุฑ ูพุงู/ุฑุดุชู.

---

## ๐งฎ ุฏุงฺฏุฑุงู ูุนูุงุฑ ุงุฒ ุฏุฏ ูพูู ุงุฏูู

ุฏุฑ ุงู ุฏุงฺฏุฑุงูุ ูพูู ุงุฏูู ููุท ฺฉ ฺฉูุงูุช ุณุงุฏู ุงุณุช ฺฉู ุจุง ุฑฺฉูุฆุณุชโูุง ุนุงุฏ ุจู ุจฺฉโุงูุฏ ูุตู ูโุดูุฏ ู ุฏุฑ ุณูุช ููุจุงู (ุงูพ ุงุตู) ูู ฺฉ ฺฉูุงูุช ุฏฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุฏุงุฏูโูุง ุฑุง ูุตุฑู ูโฺฉูุฏ.

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           Flutter Admin Panel             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                            โ
โ  Screens (ุตูุญุงุช ุงุฏูู)                    โ
โ  โโ VideoListScreen                        โ
โ  โโ VideoEditScreen                        โ
โ  โโ BookAnswerListScreen                   โ
โ  โโ ProvincialPdfListScreen                โ
โ  โโ BannerListScreen                       โ
โ  โโ ...                                    โ
โ                                            โ
โ  โ  (Supabase Dart Client / HTTP)         โ
โโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ
   โ  ุฑฺฉูุฆุณุชโูุง ุณุงุฏู: SELECT / INSERT / UPDATE / DELETE
   โ
โโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ               Supabase Backend            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Tables:                                   โ
โ   โข lesson_videos                          โ
โ   โข book_answer_pdfs                       โ
โ   โข provincial_sample_pdfs                 โ
โ   โข banners                                โ
โ   โข change_counts                          โ
โ   โข auth.users / ุณุงุฑ ุฌุฏุงูู ุณุณุชู        โ
โ                                            โ
โ  Edge Functions:                           โ
โ   โข create-content (ุจุฑุง ุงุฌุงุฏ ูุฏู)      โ
โ   โข update-content (ุจุฑุง ูุฑุงุด ูุฏู)     โ
โ   โข delete-content (ุจุฑุง soft delete)      โ
โ   โข (ุฏุฑ ุตูุฑุช ูุงุฒ) ูุงูฺฉุดูโูุง ูุฑุจูุท ุจู PDF โ
โโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ
   โ  ูพุงุณุฎโูุง ุจู ุตูุฑุช JSON ุจู ุฏู ฺฉูุงูุช ุจุฑูโฺฏุฑุฏุฏ
   โ
โโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ        Flutter Mobile App (ฺฉุงุฑุจุฑุงู)       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงู ุงูพ ุงุฒ ููุงู ุชุจูโูุง ุงุณุชูุงุฏู ูโฺฉูุฏุ   โ
โ  ูู ูุนูุงุฑ ฺฉุด ู ููุงุด ูุฎุตูุต ุฎูุฏุด ุฑุง ุฏุงุฑุฏ โ
โ  (ุจุฑุง ูพูู ุงุฏูู ููู ูุณุชุ ููุท ุจุฏุงูุฏ      โ
โ  ูุฑ ุชุบุฑ ฺฉู ุฏุฑ ุงุฏูู ุงุนูุงู ฺฉูุฏุ ุจุนุฏุงู   โ
โ  ุฏุฑ ุงู ุงูพ ุฏุฏู ุฎูุงูุฏ ุดุฏ).                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งฉ ุฌูุนโุจูุฏ ุจุฑุง ุฏููููพุฑ ูพูู ุงุฏูู

- ุงู ุณูุฏ ุจู ุชู ูโฺฏูุฏ:
  - **ุงูุงู ฺู ุชุจูโูุง ูุฌูุฏ ุฏุงุฑุฏ** ู **ฺู ููุฏูุง ุฏุงุฑูุฏ**  
  - **ูุฑ ุชุจู ฺู ููุด ุฏุฑ ุงฺฉูุณุณุชู ุฏุงุฑุฏ**  
  - **ฺุทูุฑ ุฏุฑ ูพูู ุงุฏูู ููุงุชุฑ ุจุงุฏ ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉู**  
  - **ฺฉุฏุงู ุชุจูโูุง ูุฏู ุญุฐู ุดุฏูโุงูุฏ** ู **ฺู ฺุฒูุง ุฌุงฺฏุฒูโุดุงู ุดุฏู**

- ูฺฉุชูู ุญุงุช:
  - ุงูพ ุงุตู ฺฉุงุฑุจุฑ ุงุฒ Mini-Request + Hive + JSON ุงุณุชูุงุฏู ูโฺฉูุฏ.  
  - **ูพูู ุงุฏูู ููุท ฺฉ ฺฉูุงูุช ุณุงุฏูู CRUD ุงุณุช** ฺฉู ูุณุชููุงู ุจู ููู ุชุจูโูุง ูุตู ูโุดูุฏ  
    ู ุจุง ุฑฺฉูุฆุณุชโูุง ุณูุช ุตูุญูโุง ฺฉุงุฑ ูโฺฉูุฏ.

ุงฺฏุฑ ูุงุฒ ุดุฏุ ูโุชูุงูู ุฏุฑ ฺฉ ุณูุฏ ุฌุฏุง (`ADMIN_PANEL_FLUTTER_SCREEN_MAPPING.md`)  
ุจุฑุง ูุฑ ุตูุญูู ุงุฏูู (Flutter Screen) ุฏููุงู ุจููุณู ฺฉุฏุงู ุชุจูุ ฺฉุฏุงู ููุชุฑุ ู ฺฉุฏุงู ููุฏูุง ุจุงุฏ ุฑู UI ููุงุด ุฏุงุฏู ุดููุฏ.  

---

## ๐ง ุฏุงฺฏุฑุงู ยซููยป ุจูโุนููุงู ูุญุตูู ุงุตู (ฺุทูุฑ ฺฉุงุฑ ูโฺฉูู)

ุงู ุจุฎุด ุจุฑุง ุจุฑูุงููโููุณ ูพูู ุงุฏูู ุงุณุช ุชุง ุจูููุฏ **ูู (ุณุณุชู ููุดููุฏ/Agent)** ฺุทูุฑ ุฑู ููู ูพุฑูฺู ฺฉุงุฑ ฺฉุฑุฏูโุงู ู ฺุฑุง ุณุงุฎุชุงุฑ ูุนู ุจฺฉโุงูุฏ ู ูุฑุงูุช ุงู ุดฺฉู ุดุฏูุ ุจุง ูฺฏุงู ุจู ุงู ุฏุงฺฏุฑุงู ูโุชูุงูุฏ ููุทู ฺฉู ุชุตููโูุง ุฑุง ุฏุฑฺฉ ฺฉูุฏ.

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  1) ูุฑูุฏโูุง                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โข ูพุงูโูุง ุชู (ูุงูฺฉ ูุญุตูู)                 โ
โ  โข ููุงูู ูพุฑูฺู (PLAN_STATIC_DATA_TO_FRONTEND) โ
โ  โข ูุถุนุช ูุนู ุฏุชุงุจุณ ู ฺฉุฏ ููุงุชุฑ            โ
โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  2) ุชุญูู ู ูุฏู ุฐูู ูู                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โข ููู ููุณูู: ยซุฏุงุฏู ุซุงุจุช โ JSON ุ ุฏุงุฏู ูพูุง โ DBยป โ
โ  โข ุชุดุฎุต ุชุจูโูุง ุฒุงุฆุฏ ู ุชฺฉุฑุงุฑ              โ
โ  โข ุณุงุฏูโฺฉุฑุฏู ูุณุฑูุง: ูุฑ ุงูพ = ฺฉูุงูุช ุณุงุฏู ุฑู DB โ
โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  3) ุชุตููโฺฏุฑ ุจุฑุง ุจฺฉโุงูุฏ                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โข ุทุฑุงุญ ุณุงุฎุชุงุฑ ุฌุฏุฏ ุชุจูโูุง:               โ
โ    - lesson_videos                           โ
โ    - book_answer_pdfs                        โ
โ    - provincial_sample_pdfs                  โ
โ    - change_counts, banners                  โ
โ  โข ุญุฐู ุชุจูโูุง ุซุงุจุช ูุซู grades/subjects/... โ
โ  โข ุทุฑุงุญ Edge Functionูุง ุจุฑุง CRUD ูุฏู     โ
โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  4) ุชุตููโฺฏุฑ ุจุฑุง ูุฑุงูุช (ุงูพ ุงุตู)          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โข ุณุงุฎุช JSONูุง ฺูุฏูุงู ุจุฑุง ูพุงู/ุฑุดุชู/ฺฉุชุงุจ โ
โ  โข ููุงููฺฏ book_id ู subject_slug ุจุง JSON    โ
โ  โข ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณโูุง ูุญุชูุง ูุทุงุจู ูพูู     โ
โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  5) ุชุตููโฺฏุฑ ุจุฑุง ูพูู ุงุฏูู ููุงุชุฑ         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โข ุชุนุฑู ุงู ุณูุฏ (GUIDE_V2) ุจุฑุง ุชู         โ
โ  โข ุชูุถุญ:                                     โ
โ    - ูุฑ ุชุจู ฺูโฺฉุงุฑ ูโฺฉูุฏ                    โ
โ    - ูุฑ ุชุจู ุฏุฑ ฺฉุฏุงู ุตูุญู ุงุฏูู ูุตุฑู ูโุดูุฏ   โ
โ    - JSONูุง ฺู ูุณุจุช ุจุง book_id/chapter_order โ
โ  โข ุชุงฺฉุฏ: ูพูู ุงุฏูู ููุท CRUD ุณุงุฏู ุฑู ุงู DB โ
โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  6) ุฎุฑูุฌ ููุง ุจุฑุง ุชู ู ุฏููููพุฑ ุงุฏูู       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โข ุงู ฺฏุฒุงุฑุด (ADMIN_PANEL_BACKEND_GUIDE_V2)  โ
โ  โข ูุซุงูโูุง SQL ู JSON ู Flutter             โ
โ  โข ุชุตูุฑ ฺฉุงูู ุงุฒ ุงูโฺฉู ูู ฺุทูุฑ ูฺฉุฑ ฺฉุฑุฏูโุงู   โ
โ    ู ุจฺฉโุงูุฏ/ูุฑุงูุช ุฑุง ููุงููฺฏ ฺฉุฑุฏูโุงู          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

ุจุง ุฎูุงูุฏู ุงู ุฏุงฺฏุฑุงูุ ุจุฑูุงููโููุณ ูพูู ุงุฏูู ูโูููุฏ ฺฉู:

- ูู ุงุฒ ุงุจุชุฏุง ุฑู **ุณุงุฏูโุณุงุฒ** ูฺฉุฑ ฺฉุฑุฏูโุงู (ุชุจู ฺฉูโุชุฑุ JSON ุจุฑุง ุซุงุจุชโูุงุ CRUD ุดูุงู ุจุฑุง ูพูุงูุง).  
- ุชุตููโูุง ุฑู ุจฺฉโุงูุฏุ JSONูุง ู ุงูพ ุงุตูุ ููฺฏ ฺฉ ุฎุท ูฺฉุฑ ูุงุญุฏ ุฏุงุฑูุฏ.  
- ูุธููู ุงู ุฏุฑ ูพูู ุงุฏูู ููุท ุงู ุงุณุช ฺฉู ููู ูุฑุงุฑุฏุงุฏูุง ุฑุง ุฑุนุงุช ฺฉูุฏ ู ุฏุฑ ูุฑ ุตูุญูุ ุจุง ุฑฺฉูุฆุณุชโูุง ุณุงุฏูุ ุฏุงุฏู ุฑุง ุงุฒ ุงู ุชุจูโูุง ุจุฎูุงูุฏ/ุจููุณุฏ.

---

## โ ฺฺฉโูุณุช ูพุงุฏูโุณุงุฒ ูพูู ุงุฏูู ููุงุชุฑ (ฺฏุงูโุจูโฺฏุงู)

ุงู ุจุฎุด ุจุฑุง ุงู ุงุณุช ฺฉู ุงฺฏุฑ ฺฉ ุฏููููพุฑ ุชุงุฒู ุฑู ูพุฑูฺู ุขูุฏุ ููุท ุจุง ููู ฺฺฉโูุณุช ุจุชูุงูุฏ ูพูู ุงุฏูู ุฑุง ุฏุฑุณุช ู ููโุฑุงุณุชุง ุจุง ุงฺฉูุณุณุชู ุจุณุงุฒุฏ.

### 1. ุชูุธูุงุช ุงููู ูพุฑูฺู ุงุฏูู

- ุงุฌุงุฏ ุงูพ Flutter ุฌุฏุฏ (ุง ุงุณุชูุงุฏู ุงุฒ ุงูพ ุงุฏูู ููุฌูุฏ) ุจุง ุณุงุฎุชุงุฑ ูุนููู:  
  - `lib/screens/` ุจุฑุง ุตูุญูโูุง  
  - `lib/services/` ุจุฑุง ูุงูู API  
  - `lib/widgets/` ุจุฑุง ฺฉุงููพูููุชโูุง
- ุงุถุงูู ฺฉุฑุฏู Supabase:
  - ูุตุจ ูพฺฉุฌ `supabase_flutter`  
  - ููุฏุงุฑุฏู ุงููู SupabaseClient ุจุง URL ู Key ูุฎุตูุต **ุงุฏูู** (ูู ฺฉูุฏ ุนููู ุงูพ ฺฉุงุฑุจุฑ).
- ุณุงุฎุช ฺฉ ูุงูู `AdminApiService` ฺฉู ุชูุงู ุฏุณุชุฑุณ ุจฺฉโุงูุฏ ููุท ุงุฒ ุงูุฌุง ุนุจูุฑ ฺฉูุฏ (ุฏุฑ ููู ุณูุฏ ฺฉ ุงุณฺฉูุช ุณุงุฏู ุจุฑุงุด ุฏุงุฏู).

### 2. ุตูุญู ูุฏุฑุช ูุฏููุง (`lesson_videos`)

**ูุณุช (VideoListScreen):**

- ููุชุฑูุง:
  - `grade` (ฑ ุชุง ฑฒ)  
  - ุจุฑุง ฑฐโฑฒ: ุงูุชุฎุงุจ `track` ุงุฒ `'riazi'`, `'tajrobi'`, `'ensani'`, `'fani'`  
  - ุงูุชุฎุงุจ ุฏุฑุณ (`subject_slug`) ุงุฒ ูุณุช `book_id`ูุง JSON ููุงู ูพุงู  
  - ุงูุชุฎุงุจ ูุตู (`chapter_order`) ุงุฒ `chapters` ููุงู ฺฉุชุงุจ
- ุณุชููโูุง ฺฉู ุจุงุฏ ููุงุด ุจุฏู:
  - `grade`, `track`, `subject_slug`, `chapter_order`, `lesson_order`  
  - `teacher_name`, `style`, `duration_sec`  
  - ูุถุนุช PDFูุง: `note_pdf_url` / `exercise_pdf_url` ุฎุงู ุงุณุช ุง ูู
- ุนููุงุช:
  - ุฏฺฉููู ยซุงุฌุงุฏ ูุฏู ุฌุฏุฏยป โ ูุฏุงุช ุจู VideoEditScreen ุฏุฑ ุญุงูุช Create  
  - ุฏฺฉููู ยซูุฑุงุดยป ุฑู ูุฑ ุฑุฏู โ ูุฏุงุช ุจู VideoEditScreen ุฏุฑ ุญุงูุช Edit  
  - ุฏฺฉููู ยซุญุฐู ูุฑูยป โ `active = false` (ุจุง Edge Function ุง UPDATE ูุณุชูู).

**ูุฑู (VideoEditScreen):**

- ููุฏูุง:
  - ูพุงู (`grade`) โ ุงุฌุจุงุฑ  
  - ุฑุดุชู (`track`) โ ุงุฌุจุงุฑ ููุท ุงฺฏุฑ ูพุงู ฑฐโฑฒ ุงุณุช  
  - ุฏุฑุณ (`subject_slug` / `book_id`) โ ุงุฌุจุงุฑุ ููุท ฺฏุฒููโูุง ูุนุชุจุฑ JSON  
  - ูุตู (`chapter_order`) โ ุงุฌุจุงุฑุ ููุท ุดูุงุฑูโูุง ููุฌูุฏ ุฏุฑ `chapters` JSON  
  - `lesson_order` โ ุงุฌุจุงุฑุ ุนุฏุฏ ูุซุจุช  
  - `teacher_name` โ ุงุฌุจุงุฑุ ูุชู ฺฉูุชุงู  
  - `style` โ ฺฉ ุงุฒ `'book' | 'note' | 'sample'`  
  - ููฺฉ ูุฏู (`aparat_url` ุง `embed_html`)  
  - `note_pdf_url` ู `exercise_pdf_url` (ุงุฎุชุงุฑ)
- ุงุนุชุจุงุฑุณูุฌโูุง:
  - ุงฺฏุฑ `grade <= 9` โ `track` ุจุงุฏ `null` ุง ุฎุงู ุจุงุดุฏ.  
  - ุงฺฏุฑ `10 <= grade <= 12` โ `track` ุจุงุฏ ฺฉ ุงุฒ ด ููุฏุงุฑ ูุฌุงุฒ ุจุงุดุฏ.  
  - `subject_slug` ุจุงุฏ ุฏุฑ JSON ููุงู ูพุงู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ.  
  - `chapter_order` ุจุงุฏ ุฏุฑ JSON ููุงู ฺฉุชุงุจ ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ.  
  - ููฺฉโูุง ุจุงุฏ ูุฑูุช URL ูุนุชุจุฑ ุฏุงุดุชู ุจุงุดูุฏ (ุญุฏุงูู ุจุง ฺฉ Regex ูพุงูโุง).

### 3. ุตูุญู ูุฏุฑุช ฺฏุงูโุจูโฺฏุงูโูุง (`book_answer_pdfs`)

**ูุณุช (BookAnswerListScreen):**

- ููุชุฑูุง:
  - `grade_id`  
  - `book_id` (ุงุฒ JSON ููุงู ูพุงู)
- ุณุชููโูุง:
  - `grade_id`, `book_id`, `pdf_title`, `year`, `size`, `file_url`
- ููู:
  - `book_id` ุญุชูุงู ุจุงุฏ ฺฉ ุงุฒ ฺฉูุฏูุง ุฏุงุฎู `books` ุฏุฑ JSON ูพุงู ุจุงุดุฏ (ูุซู `"riazi"`, `"olom"`, ... ุฏุฑ `grade7.json`).

**ูุฑู ุงุฌุงุฏ/ูุฑุงุด:**

- ููุฏูุง:
  - ูพุงู (`grade_id`) โ ุนุฏุฏ ฑ ุชุง ฑฒ  
  - ฺฉุชุงุจ (`book_id`) โ ุงุฒ JSON  
  - ุนููุงู (`pdf_title`) โ ุงุฌุจุงุฑ  
  - ุณุงู (`year`) โ ุงุฎุชุงุฑุ ูู ุงฺฏุฑ ูพุฑ ุดุฏ ุจุงุฏ ุนุฏุฏ ููุทู (ูุซูุงู ฑณธฐโฑดฒฐ) ุจุงุดุฏ  
  - ุญุฌู (`size`) โ ุงุฎุชุงุฑุ ุนุฏุฏ ูุซุจุช (MB)  
  - ููฺฉ ูุงู (`file_url`) โ ุงุฌุจุงุฑุ URL ูุนุชุจุฑ
- ููุทู:
  - ูุฑ ุฑุฏู ุฏุฑ ุงู ุชุจูุ ฺฉ PDF ฺฏุงูโุจูโฺฏุงู ุจุฑุง ฺฉ ฺฉุชุงุจ/ูพุงู ุงุณุช.  
  - ุงฺฏุฑ ุจุฑุง ฺฉ ฺฉุชุงุจ ฺูุฏ ูุณุฎู (ุณุงู ูุฎุชูู) ุฏุงุฑุ ูโุชูุงู ฺูุฏ ุฑุฏู ุจุง `year` ูุชูุงูุช ุซุจุช ฺฉู.

### 4. ุตูุญู ูุฏุฑุช ููููู ุณุคุงูโูุง (`provincial_sample_pdfs`)

**ูุณุช (ProvincialSampleListScreen):**

- ููุชุฑูุง:
  - `grade_id`  
  - `book_id` (ุงุฒ JSON)  
  - `type` ุงุฒ ุจู `'first_term'`, `'second_term'`, `'midterm_1'`, `'midterm_2'`  
  - `year`  
  - `has_answer` (ููุท ุจุง ูพุงุณุฎ / ููุท ุจุฏูู ูพุงุณุฎ / ููู)
- ุณุชููโูุง:
  - `grade_id`, `book_id`, `pdf_title`, `type`, `year`, `author`, `has_answer`, `size`, `file_url`

**ูุฑู ุงุฌุงุฏ/ูุฑุงุด:**

- ููุฏูุง:
  - `grade_id` โ ุนุฏุฏ ฑ ุชุง ฑฒ  
  - `book_id` โ ุงุฒ JSON  
  - `type` โ ฺฉ ุงุฒ enum ุจุงูุง  
  - `pdf_title` โ ุงุฌุจุงุฑ  
  - `year` โ ุงุฎุชุงุฑุ ุนุฏุฏ ุณุงู  
  - `author` โ ุงุฎุชุงุฑ (ูุซูุงู ูุงู ุงุณุชุงู/ุทุฑุงุญ)  
  - `has_answer` โ Boolean (checkbox)  
  - `size` โ ุงุฎุชุงุฑุ ุนุฏุฏ ูุซุจุช  
  - `file_url` โ ุงุฌุจุงุฑุ URL

### 5. ุตูุญู ูุฏุฑุช ุจูุฑูุง (`banners`)

- ุณุชููโูุง:
  - `title`, `image_url`, `link_url`, `active`, `position`
- ูุฑู:
  - ุนููุงู (`title`) โ ุงุฌุจุงุฑ  
  - ุชุตูุฑ (`image_url`) โ ุงุฌุจุงุฑ  
  - ููฺฉ (`link_url`) โ ุงุฎุชุงุฑ  
  - ุชุฑุชุจ (`position`) โ ุจุฑุง sort  
  - ูุถุนุช (`active`) โ ุฑูุดู/ุฎุงููุด

### 6. ููุงูู ุงููุช ู ุฏุณุชุฑุณ (ุจุฑุง ุฏููููพุฑ ุงุฏูู)

- ูพูู ุงุฏูู ุจุงุฏ ุจุง **ฺฉูุฏ ุฌุฏุง ู ุณุทุญ ุฏุณุชุฑุณ ุจุงูุง** ุจู Supabase ูุตู ุดูุฏ (Service Role ุฏุฑ ฺฉูุงูุช ูุณุชููุงู ุงุณุชูุงุฏู ูุดูุฏุ ุจูฺฉู ูพุดุช ุณุฑ Edge Functionูุง ุจุงุดุฏ).  
- ุชูุงู ุนููุงุช ููุดุชู ุฑู ุชุจูโูุง ุญุณุงุณ (`lesson_videos`, `book_answer_pdfs`, `provincial_sample_pdfs`, `banners`)  
  ููุท ุจุงุฏ ุงุฒ ุทุฑู ุตูุญุงุช ุงุฏูู ูุงุจู ุงูุฌุงู ุจุงุดุฏุ ูู ุงุฒ ุงูพ ฺฉุงุฑุจุฑ.  
- ุงฺฏุฑ ุงุฒ RLS ุงุณุชูุงุฏู ูโฺฉู:
  - rule ุจููุณ ฺฉู ููุท ฺฉุงุฑุจุฑุงู ุจุง ููุด Admin ุจุชูุงููุฏ `INSERT/UPDATE/DELETE` ุฑู ุงู ุชุจูโูุง ุงูุฌุงู ุฏููุฏ.

### 7. ุฎูุงุตู ููุณูู (ุจุฑุง ุงูโฺฉู ุฏููููพุฑ ฺฏู ูุดูุฏ)

- **ุฏุงุฏูู ุซุงุจุช** (ูพุงูโูุงุ ฺฉุชุงุจโูุงุ ูุตูโูุงุ ุขฺฉูโูุงุ ฺฉุงูุฑูุง) ุฏุฑ JSON ุงุณุช (`grades.json`, `gradeX.json`).  
- **ุฏุงุฏูู ูพูุง** (ูุฏูุ ฺฏุงูโุจูโฺฏุงูุ ููููู ุณุคุงูุ ุจูุฑ) ุฏุฑ ุชุจูโูุง Supabase ุงุณุช.  
- ุงูพ ุงุตู:
  - ุงุฒ JSON ุจุฑุง ุณุงุฎุช UIุ ู ุงุฒ ุชุจูโูุง (ุจุง ูุนูุงุฑ ุฎูุฏุด) ุจุฑุง ูุญุชูุง ุงุณุชูุงุฏู ูโฺฉูุฏ.  
- ูพูู ุงุฏูู:
  - ููุท ฺฉ **ฺฉูุงูุช CRUD ุณุงุฏู** ุฑู ููู ุชุจูโูุง ูพูุงุณุช ู ุฏุฑ ุตูุฑุช ูุงุฒุ ุงุฒ JSONูุง ุจุฑุง ุณุงุฎุช dropdownูุง ุชูุฒ ู ูุนุชุจุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ.  
- ุงฺฏุฑ ุฏููููพุฑ ุงู ุณูุฏ ุฑุง ฺฉุงูู ุจุฎูุงูุฏ ู ฺฺฉโูุณุช ุจุงูุง ุฑุง ุงุฌุฑุง ฺฉูุฏุ  
  ุจุฏูู ูุงุฒ ุจู ุฏุงูุณุชู ุฌุฒุฆุงุช ุฏุงุฎู Mini-Request ุง Hiveุ ูโุชูุงูุฏ ูพูู ุงุฏูู ุณุงูู ู ููโุฑุงุณุชุง ุงฺฉูุณุณุชู ุจุณุงุฒุฏ.


